{% extends "layout.html" %}

{% block title %}Menu Details{% endblock %}

{% block content %}

    <div style="text-align:center">
        <h1 class = "title">{{ location }} Cafe</h1>
        <hr>
        
        <h1 class = "subtitle">Today's Menu:</h1>
        <!-- convert ot string version of date -->
        <h2 class = "subtitle"> {{ menu.date.strftime('%A, %B %d') }} </h2>
        <br>
        
        <!-- only print according to the menu's specific location -->
        {% if menu.location == location %} 

            <!-- for loop for each meal category stored in the menu -->
            {% for category in menu.meal_categories %}

                <!-- only printing category that belongs to the specific menu -->
                {% for t in category.types %}
                    {% if t.type == type %}
                        <h3><b>{{ category.category }}</b></h3>
                    {% endif %}
                {% endfor %}

                <!-- display meals under the menu -->
                {% for meal in menu.meals %}

                    <!-- checking category and meal type -->
                    {% if category in meal.categories and meal.type == type %}
                        <p><b>{{ meal.meal_name }}</b></p>

                        <!-- displaying meal attributes ; nutritional: meal type  -->
                        <p><b>Meal Type:</b>
                        {% for info in meal.infos %}
                            {{ info.info }}{% if not loop.last %}, {% endif %}
                        {% endfor %}
                        </p>

                        <!-- displaying meal attributes ; restriction: allergen  -->
                        <p><span style="color:#FF0000"><b>Allergens:</b></span>
                        {% for restriction in meal.restrictions %}
                            {{ restriction.restriction }}{% if not loop.last %}, {% endif %}
                        {% endfor %}
                        </p>

                        {% if loop.last %}<br>{% endif %}
                        <br>
                    {% endif %} 
                    
                {% endfor %} <!-- end meal loop-->
            {% endfor %} <!-- end category loop-->
        {% endif %} <!-- end location loop -->
        
    </div>
    
{% endblock %}