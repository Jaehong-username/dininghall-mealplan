{% extends "layout.html" %}

{% block title %}Dining Hall Meal Plan Manager{% endblock %}
{% extends "layout.html" %}

{% block title %}Dining Hall Meal Plan Manager{% endblock %}

{% block content %}
<div class="container mt-5 d-flex justify-content-center">
    <div class="w-100" style="max-width: 600px;"> <!-- Constrain width -->
        <h1 class="display-5 text-center mb-4">Manage Your Meal Plan</h1>
        <hr>

        <!-- Current Plan Summary -->
        <div class="card shadow-sm mb-4">
            <div class="card-body">
                <h4 class="card-title mb-3">Your Current Plan</h4>
                <p class="mb-1"><strong>Level:</strong> {{ student.plan_id }}</p>
                <p><strong>Balance:</strong> ${{ student.balance }}</p>
            </div>
        </div>

        <!-- Form to Change Plan -->
        <div class="card shadow-sm mb-4">
            <div class="card-body">
                <h4 class="card-title mb-3">Change Meal Plan</h4>
                <form method="POST">
                    {{ form.hidden_tag() }}
                    <div class="form-group mb-3">
                        <label for="plan_id"><strong>Select a new level:</strong></label>
                        {{ form.plan_id(class="form-control") }}
                    </div>
                    <div class="text-end">
                        <button type="submit" class="btn btn-primary">{{ form.submit.label.text }}</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Plan Details -->
        <div class="card shadow-sm mb-4">
            <div class="card-body">
                <h4 class="card-title mb-3">Plan Info</h4>
                <p class="mb-3">All plans get 40% off dining center meals and 10% off at campus cafés. Use your CougarCard like a prepaid card.</p>

                {% if student.plan_id == 1 %}
                    <h6><strong>Level 1</strong></h6>
                    <p>$935 Base + $1,120 Dining Dollars → <b>$2,055 Total</b></p>
                    <p>2 meals most weekdays, cook often or off-campus.</p>
                {% elif student.plan_id == 2 %}
                    <h6><strong>Level 2</strong></h6>
                    <p>$935 Base + $1,475 Dining Dollars → <b>$2,410 Total</b></p>
                    <p>2–3 meals daily, occasionally away on weekends.</p>
                {% elif student.plan_id == 3 %}
                    <h6><strong>Level 3</strong></h6>
                    <p>$935 Base + $1,795 Dining Dollars → <b>$2,730 Total</b></p>
                    <p>Eat every meal on campus, stay most weekends.</p>
                {% else %}
                    <p class="text-danger"> No plan selected. Please choose one above.</p>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
